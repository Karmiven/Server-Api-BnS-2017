<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Server Error</title>
      <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
      <link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css">
      <link rel="stylesheet" href="/css/error.css">
   </head>
   <body class="bg-light d-flex flex-column min-vh-100">
      <div class="container py-5">
         <div class="row justify-content-center">
            <div class="col-md-10 col-lg-10">
               <div class="card shadow">
                  <div class="card-header bg-danger text-white">
                     <div class="d-flex align-items-center">
                        <i class="bi bi-exclamation-octagon-fill fs-3 me-2 pulse-icon"></i>
                        <h2 class="mb-0">Server Error</h2>
                     </div>
                  </div>
                  <div class="card-body">
                     <div class="alert alert-danger d-flex align-items-center">
                        <i class="bi bi-bug-fill fs-3 me-3"></i>
                        <div>
                           <strong><%= error.message || 'An unexpected error occurred' %></strong>
                           <% if (error.status) { %>
                           <div class="small">Error code: <%= error.status %></div>
                           <% } %>
                        </div>
                     </div>
                     <% if (error.stack) { %>
                     <div class="mb-4">
                        <button class="btn btn-sm btn-outline-secondary mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#errorDetails">
                        <i class="bi bi-code-square me-1"></i>
                        Technical Details
                        </button>
                        <div class="collapse" id="errorDetails">
                           <pre class="p-3 bg-dark text-white rounded"><code><%= error.stack %></code></pre>
                        </div>
                     </div>
                     <% } %>
                     <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button onclick="window.history.back()" class="btn btn-outline-secondary me-md-2">
                        <i class="bi bi-arrow-left me-1"></i>
                        Go Back
                        </button>
                        <a href="/" class="btn btn-primary">
                        <i class="bi bi-house-door me-1"></i>
                        Home Page
                        </a>
                        <!-- <a href="/admin" class="btn btn-info"> -->
                        <!-- <i class="bi bi-grid-3x3-gap-fill me-1"></i> -->
                        <!-- Admin Panel -->
                        <!-- </a> -->
                        <button onclick="window.location.reload()" class="btn btn-outline-primary">
                        <i class="bi bi-arrow-repeat me-1"></i>
                        Retry
                        </button>
                     </div>
                  </div>
                  <div class="card-footer text-muted text-center small">
                     <i class="bi bi-clock me-1"></i>
                     <%= new Date().toLocaleString() %>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <%- include('partials/adminFooter') %>
      <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
   </body>
</html>